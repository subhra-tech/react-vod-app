(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t,a){e.exports=a(325)},205:function(e,t,a){},325:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),i=a.n(o),c=(a(205),a(61)),s=a(31),l=a(28),u=a.n(l),m=a(36),d=a(21),p=a(22),f=a(24),h=a(23),b=a(25),v=a(11),g=a(53),E=a.n(g);var y=Object(v.withStyles)(function(){return{progress:{position:"absolute",top:"50%",left:"50%"}}})(function(e){var t=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{className:t.progress}))}),k=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,o,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.method,r="".concat("https://demo2697834.mockable.io").concat(a),o={mode:"cors",method:n||"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8"}},e.next=5,fetch(r,o);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=a(56),j=a.n(O),w=a(57),C=a.n(w),x=a(58),S=a.n(x),N=a(60),D=a.n(N),I=a(59),B=a.n(I),R=a(104),L=a.n(R),z=a(55),V=a.n(z),M=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).video=r.a.createRef(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.video.current.play()}},{key:"componentWillUnmount",value:function(){this.video.current.pause()}},{key:"render",value:function(){var e=this.props,t=e.url,a=e.onEnded,n=e.classes;return r.a.createElement("video",{ref:this.video,className:n.video,controls:!0,onEnded:a,preload:"metadata"},r.a.createElement("source",{src:t,type:"video/mp4"}),"> Your browser does not support HTML5 video.")}}]),t}(n.Component),T=Object(v.withStyles)({video:{width:"100%",height:"100%"}})(M),W=a(8);function A(e){return r.a.createElement(V.a,Object.assign({direction:"up"},e))}var $=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.videoData,n=e.isOpen,o=e.onClose,i=a.title,c=a.contents;return r.a.createElement("div",null,r.a.createElement(j.a,{fullScreen:!0,open:n,onClose:o,TransitionComponent:A},r.a.createElement(C.a,{position:"static",color:"default"},r.a.createElement(S.a,{className:t.toolBar},r.a.createElement(B.a,null,i),r.a.createElement(D.a,{onClick:o},r.a.createElement(L.a,null)))),r.a.createElement(W.c,null,r.a.createElement(T,{url:c[0].url,onEnded:o}))))}}]),t}(r.a.Component),F=Object(v.withStyles)({appBar:{position:"relative"},flex:{flex:1},toolBar:{display:"flex",justifyContent:"space-between"}})($),J=a(30),K=a(32),U=a(42),_=a.n(U),G=a(106),H=a.n(G),P=a(107),Y=a.n(P),q=a(105),Q=a.n(q),X=Object(v.withStyles)(function(e){var t;return{image:(t={position:"relative",height:340,width:"18%","&:hover, &$focusVisible":{zIndex:1,"& $imageBackdrop":{opacity:.15},"& $imageMarked":{opacity:0},"& $imageTitle":{display:"none"},"& $icon":{display:"block"}}},Object(K.a)(t,e.breakpoints.down("sm"),{width:"31%",height:270,marginTop:14}),Object(K.a)(t,e.breakpoints.down("xs"),{width:"47%",height:270,marginTop:10}),t),focusVisible:{},imageButton:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.common.white},imageSrc:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"},imageBackdrop:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:e.palette.common.black,opacity:.4,transition:e.transitions.create("opacity")},imageTitle:{position:"relative",padding:"".concat(2*e.spacing.unit,"px ").concat(4*e.spacing.unit,"px ").concat(e.spacing.unit+6,"px")},imageMarked:{height:3,width:18,backgroundColor:e.palette.common.white,position:"absolute",bottom:-2,left:"calc(50% - 9px)",transition:e.transitions.create("opacity")},icon:{display:"none",color:e.palette.common.white,margin:e.spacing.unit},play:{fontSize:"40px"}}})(function(e){var t=e.entry,a=e.handleClick,n=e.classes;return r.a.createElement(W.b,{focusRipple:!0,key:t.id,className:n.image,focusVisibleClassName:n.focusVisible,onClick:function(){return a(t.id)}},r.a.createElement("span",{className:n.imageSrc,style:{backgroundImage:"url(".concat(t.images[0].url,")")}}),r.a.createElement("span",{className:n.imageBackdrop}),r.a.createElement("span",{className:n.imageButton},r.a.createElement(W.e,{color:"primary",className:n.icon,component:"span"},r.a.createElement(Q.a,{className:n.play})),r.a.createElement(W.g,{component:"span",variant:"subtitle1",color:"inherit",className:n.imageTitle},t.title,r.a.createElement("span",{className:n.imageMarked}))))}),Z=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={startIndex:0,stepSize:5,displayEntries:Object(J.a)(a.props.entries)},a.carouselRef=r.a.createRef(),a.handleNext=function(){a.setState(function(e){var t=Object(J.a)(e.displayEntries),a=t.shift();return{displayEntries:[].concat(Object(J.a)(t),[a])}})},a.handleBack=function(){a.setState(function(e){var t=Object(J.a)(e.displayEntries);return{displayEntries:[t.pop()].concat(Object(J.a)(t))}})},a.handleKeyboardEvent=function(e){var t=e.key;"ArrowRight"===t?a.handleBack():"ArrowLeft"===t&&a.handleNext()},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.carouselRef.current.focus()}},{key:"componentDidUpdate",value:function(){this.carouselRef.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleClick,n=this.state,o=n.startIndex,i=n.stepSize,c=n.displayEntries;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.root,ref:this.carouselRef,tabIndex:0,onKeyDown:this.handleKeyboardEvent},c.length>=i&&r.a.createElement(_.a,{size:"small",onClick:this.handleBack},r.a.createElement(H.a,{className:t.button})),c.slice(o,i).map(function(e){return r.a.createElement(X,{key:e.id,entry:e,handleClick:a})}),c.length>=i&&r.a.createElement(_.a,{size:"small",onClick:this.handleNext},r.a.createElement(Y.a,{className:t.button}))),r.a.createElement("div",{className:t.deviceRoot},c.map(function(e){return r.a.createElement(X,{key:e.id,entry:e,handleClick:a})})))}}]),t}(r.a.Component),ee=Object(v.withStyles)(function(e){return{root:Object(K.a)({display:"flex",flexWrap:"wrap",minWidth:300,width:"100%",justifyContent:"space-evenly","&:focus":{outline:"none"}},e.breakpoints.down("sm"),{display:"none"}),deviceRoot:Object(K.a)({display:"none"},e.breakpoints.down("sm"),{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly","&:focus":{outline:"none"}}),button:{fontSize:40,color:"#888"},carouselBtn:Object(K.a)({},e.breakpoints.down("sm"),{display:"none"})}})(Z);var te=Object(v.withStyles)({header:{fontSize:20,marginRight:1},content:{display:"flex",justifyContent:"center",alignItems:"center"}})(function(e){var t=e.classes,a=e.label;return r.a.createElement("div",{className:t.content},r.a.createElement("p",{className:t.header},a))}),ae=function(e){var t=JSON.parse(localStorage.getItem("watched_list"))||[],a={id:e,lastWatched:new Date},n=t.filter(function(t){return t.id!==e});localStorage.setItem("watched_list",JSON.stringify([a].concat(Object(J.a)(n))))},ne=a(43),re=a.n(ne),oe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,isError:!1,movieData:[],isOpen:!1,currentVideoId:null},a.handleClickOpen=function(){a.setState({isOpen:!0})},a.handleClose=function(){a.setState({isOpen:!1})},a.handleClick=function(e){a.setState({isOpen:!0,currentVideoId:e},function(){ae(e)})},a.loadData=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({url:"/movies"});case 2:if(200!==(t=e.sent).status){e.next=10;break}return e.next=6,t.json();case 6:n=e.sent,a.setState({movieData:n,isLoading:!1}),e.next=11;break;case 10:a.setState({isError:!0});case 11:case"end":return e.stop()}},e)})),a.refreshData=function(){a.setState({isLoading:!0,movieData:[]},function(){return a.loadData()})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isError,n=e.movieData,o=e.currentVideoId,i=e.isOpen,c=this.props.classes;if(a)return r.a.createElement("h1",null,"Error!!");if(t)return r.a.createElement(y,null);var s=n.entries,l=n.totalCount;return r.a.createElement("div",null,r.a.createElement(te,{label:"Movies"}),!!o&&r.a.createElement(F,{isOpen:i,onClose:this.handleClose,videoData:s.find(function(e){return e.id===o})}),r.a.createElement(ee,{entries:s,totalCount:l,handleClick:this.handleClick}),r.a.createElement(W.d,{onClick:this.refreshData,color:"default",className:c.fab},r.a.createElement(re.a,{className:c.refreshIcon})))}}]),t}(n.Component),ie=Object(v.withStyles)(function(e){return{card:{maxWidth:230,margin:10},media:{objectFit:"cover"},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit,backgroundColor:"#fff"},refreshIcon:{color:"#333"}}})(oe),ce=a(108),se=a.n(ce),le=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,isError:!1,movieData:[],entries:[],isOpen:!1,currentVideoId:null},a.handleClickOpen=function(){a.setState({isOpen:!0})},a.handleClose=function(){a.setState({isOpen:!1})},a.handleClick=function(e){a.setState({isOpen:!0,currentVideoId:e},function(){ae(e)})},a.loadData=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({url:"/movies"});case 2:if(200!==(t=e.sent).status){e.next=10;break}return e.next=6,t.json();case 6:n=e.sent,a.setState({movieData:n,isLoading:!1}),e.next=11;break;case 10:a.setState({isError:!0});case 11:case"end":return e.stop()}},e)})),a.refreshData=function(){a.setState({isLoading:!0,movieData:[]},function(){return a.loadData()})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.movieData,n=t.movieData;if(Object.keys(a).length&&a!==n){var r=JSON.parse(localStorage.getItem("watched_list"))||[],o=a.entries,i=[];r.forEach(function(e){var t=o.find(function(t){return t.id===e.id});t&&i.push(t)}),this.setState({entries:i})}}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isError,n=e.entries,o=e.currentVideoId,i=e.isOpen;if(a)return r.a.createElement("h1",null,"Error!!");if(t)return r.a.createElement(y,null);var c=this.props.classes;return n.length?r.a.createElement("div",null,r.a.createElement(te,{label:"Recently watched movies"}),!!o&&r.a.createElement(F,{isOpen:i,onClose:this.handleClose,videoData:n.find(function(e){return e.id===o})}),r.a.createElement(ee,{entries:n,handleClick:this.handleClick}),r.a.createElement(W.d,{onClick:this.refreshData,color:"default",className:c.fab},r.a.createElement(re.a,{className:c.refreshIcon}))):r.a.createElement("div",{className:c.notFound},r.a.createElement(te,{label:"No recently watched movied found",handleRefresh:this.loadData}),r.a.createElement(se.a,{className:c.error}),r.a.createElement(W.d,{onClick:this.refreshData,color:"default",className:c.fab},r.a.createElement(re.a,{className:c.refreshIcon})))}}]),t}(n.Component),ue=Object(v.withStyles)(function(e){return{notFound:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},error:{fontSize:60},fab:{position:"fixed",bottom:2*e.spacing.unit,right:2*e.spacing.unit,backgroundColor:"#fff"},refreshIcon:{color:"#333"}}})(le),me=a(110),de=a.n(me),pe=a(111),fe=a.n(pe);var he=Object(v.withStyles)({root:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},appBar:{marginBottom:10},toolBar:{display:"flex",justifyContent:"space-between"}})(function(e){var t=e.classes;return r.a.createElement(c.a,{basename:"".concat("/react-vod-app")},r.a.createElement("div",{className:t.root},r.a.createElement(W.a,{position:"static",color:"default",className:t.appBar},r.a.createElement(W.f,{className:t.toolBar},r.a.createElement(c.b,{to:"/",className:t.menuButton},r.a.createElement(W.e,null,r.a.createElement(de.a,null))),r.a.createElement(c.b,{to:"/history/",className:t.menuButton},r.a.createElement(W.e,null,r.a.createElement(fe.a,null))))),r.a.createElement(s.a,{path:"/",exact:!0,component:ie}),r.a.createElement(s.a,{path:"/history/",component:ue})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[200,1,2]]]);
//# sourceMappingURL=main.4cefc207.chunk.js.map